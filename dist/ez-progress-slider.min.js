angular.module("ez.progressSlider",[]).constant("EzProgressSliderConfig",{draggableTarget:!1}).directive("ezProgressSlider",["$parse","EzProgressSliderConfig",function(a,b){return{restrict:"EA",templateUrl:"ez-progress-slider-tpl.html",replace:!0,scope:{progress:"=",target:"=?",config:"=?"},link:function(a,c){c.wrap('<div class="ez-progress-slider progress"></div>'),a.options=angular.extend({},b,a.config);var d,e=c[0],f=e.children[0],g=e.children[1],h=e.children[2],i=parseInt(a.progress,10),j=a.hasOwnProperty("target"),k=function(a){return d=c.parent().innerWidth(),a?parseInt((a*d/100).toFixed(0),10):0},l=k(i),m=function(){e.style.width=l+"px",f.style.left=l-10+"px",h.innerHTML=Math.round(i)+"%",j&&(n>i?e.classList.add("progress-bar-danger"):e.classList.remove("progress-bar-danger"))};if(interact(f).draggable({axis:"x",onstart:function(){l=k(i)},onmove:function(a){return l+=a.dx,0>l||l>d?void(l-=a.dx):(i=Math.round(l/d*100),void m())},onend:function(){a.$apply(function(){a.progress=Math.round(i)})}}).actionChecker(function(a,b){return 3===a.which?null:b}),j){var n=a.target,o=parseInt(k(n),10),p=function(){g.style.left=o-6+"px",g.setAttribute("title",n+"%")};a.options.draggableTarget&&interact(g).draggable({axis:"x",onstart:function(){o=k(n)},onmove:function(a){return o+=a.dx,0>o||o>d?void(o-=a.dx):(n=Math.round(o/d*100),void p())},onend:function(){a.$apply(function(){a.target=Math.round(n)})}}).actionChecker(function(a,b){return 3===a.which?null:b}),p()}else g.remove();m(),setTimeout(function(){e.parentNode.classList.add("ez-loaded")},1e3)}}}]);