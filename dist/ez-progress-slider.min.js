angular.module("ez.progressSlider",[]).constant("EzProgressSliderConfig",{draggableTarget:!1}).directive("ezProgressSlider",["$parse","EzProgressSliderConfig",function(a,b){return{restrict:"EA",templateUrl:"ez-progress-slider-tpl.html",replace:!0,scope:{progress:"=",target:"=?",config:"=?"},link:function(a,c){c.wrap('<div class="ez-progress-slider progress"></div>'),a.options=angular.extend({},b,a.config);var d=c[0],e=d.children[0],f=d.children[1],g=d.children[2],h=c.parent().innerWidth(),i=parseInt(a.progress,10),j=a.hasOwnProperty("target"),k=function(a){return a?parseInt((a*h/100).toFixed(0),10):0},l=k(i),m=function(){d.style.width=l+"px",e.style.left=l-10+"px",g.innerHTML=Math.round(i)+"%",j&&(n>i?d.classList.add("progress-bar-danger"):d.classList.remove("progress-bar-danger"))};if(interact(e).draggable({axis:"x",onstart:function(){l=k(i)},onmove:function(a){return l+=a.dx,0>l||l>h?void(l-=a.dx):(i=Math.round(l/h*100),void m())},onend:function(){a.$apply(function(){a.progress=Math.round(i)})}}).actionChecker(function(a,b){return 3===a.which?null:b}),j){var n=a.target,o=parseInt(k(n),10),p=function(){f.style.left=o-6+"px",f.setAttribute("title",n+"%")};a.options.draggableTarget&&interact(f).draggable({axis:"x",onstart:function(){o=k(n)},onmove:function(a){return o+=a.dx,0>o||o>h?void(o-=a.dx):(n=Math.round(o/h*100),void p())},onend:function(){a.$apply(function(){a.target=Math.round(n)})}}).actionChecker(function(a,b){return 3===a.which?null:b}),p()}else f.remove();m(),setTimeout(function(){d.parentNode.classList.add("ez-loaded")},1e3)}}}]);